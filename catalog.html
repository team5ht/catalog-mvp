<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Каталог</title>
<link rel="stylesheet" href="styles/tokens.css" />
<link rel="stylesheet" href="styles/ui.css" />
<link rel="stylesheet" href="styles/pages.css" />
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ffffff">
</head>
<body class="app-shell">
<main class="app-container">
  <section class="catalog-search" aria-label="Поиск по каталогу">
    <div class="catalog-search__field">
      <svg class="catalog-search__icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M15.5 14h-.79l-.28-.27a6 6 0 1 0-.71.71l.27.28v.79l4.25 4.25a1 1 0 0 0 1.42-1.42L15.5 14zm-5 0a4 4 0 1 1 0-8 4 4 0 0 1 0 8z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      <input class="catalog-search__input" type="search" name="search" placeholder="Поиск скоро заработает" disabled aria-label="Поиск скоро заработает" />
    </div>
  </section>
  <section id="categories" class="catalog-categories">
    <!-- Категории будут вставлены скриптом -->
  </section>
  <section id="catalog-list" class="catalog-list">
    <!-- Лента карточек каталога -->
  </section>
</main>

<nav class="bottom-nav">
  <button id="nav-home" class="bottom-nav__button" aria-label="Главная">
    <svg class="bottom-nav__icon" width="25" height="25" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M3 12l9-9 9 9v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-9z" fill="none" stroke-width="2"/></svg>
  </button>
  <button id="nav-catalog" class="bottom-nav__button bottom-nav__button--active" aria-label="Каталог">
    <svg class="bottom-nav__icon" width="25" height="25" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><rect x="3" y="4" width="18" height="16" fill="none" stroke-width="2"/></svg>
  </button>
  <button id="nav-account" class="bottom-nav__button nav-account is-loading" aria-label="Профиль">
    <!-- Иконка вставляется скриптом -->
  </button>
</nav>

<script src="supabase-config.js"></script>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="supabase-client.js"></script>
<script src="app.js"></script>
<script src="nav-auth.js"></script>
<script>
document.getElementById('nav-home').onclick = () => location.href = 'index.html';

function showCatalogError() {
  renderInlineError('categories', 'Не удалось загрузить категории.');
  renderInlineError('catalog-list', 'Не удалось загрузить материалы.');
}

loadAppData()
  .then((data) => {
    renderCategories(data.categories);
    renderCatalog(data.materials);
  })
  .catch(() => {
    showCatalogError();
  });
</script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('sw.js');
  });
}
</script>
</body>
</html>
